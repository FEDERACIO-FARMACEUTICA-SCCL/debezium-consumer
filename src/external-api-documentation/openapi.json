{"openapi":"3.1.0","info":{"title":"API externa para ingesta de datos","description":"Envío de datos al datalake a través de FastAPI y RabbitMQ","version":"1.0.0"},"paths":{"/ingest-api/token":{"post":{"tags":["Login"],"summary":"Obtener token de acceso","description":"Endpoint para obtener un token JWT","operationId":"login_ingest_api_token_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_ingest_api_token_post"}}},"required":true},"responses":{"200":{"description":"Token JWT para autenticación","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ingest-api/suppliers":{"put":{"tags":["Suppliers"],"summary":"Crear o actualizar proveedores","description":"Recibe una lista de proveedores y los envía al datalake para su creación o actualización","operationId":"upsert_suppliers_ingest_api_suppliers_put","requestBody":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/Supplier"},"type":"array","title":"Suppliers"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]},"delete":{"tags":["Suppliers"],"summary":"Eliminar proveedores","description":"Recibe una lista de IDs de proveedores con sus fechas de borrado y los envía al datalake para su eliminación","operationId":"delete_suppliers_ingest_api_suppliers_delete","requestBody":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/SupplierDeletion"},"type":"array","title":"Deletions"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/ingest-api/suppliers-contacts":{"put":{"tags":["Suppliers"],"summary":"Crear o actualizar contactos de proveedores","description":"Recibe una lista de contactos de proveedores y los envía al datalake para su creación o actualización","operationId":"upsert_suppliers_contacts_ingest_api_suppliers_contacts_put","requestBody":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/SupplierContact"},"type":"array","title":"Suppliers Contacts"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]},"delete":{"tags":["Suppliers"],"summary":"Eliminar contactos de proveedores","description":"Recibe una lista de IDs de contactos de proveedores con sus fechas de borrado y los envía al datalake para su eliminación","operationId":"delete_suppliers_contacts_ingest_api_suppliers_contacts_delete","requestBody":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/SupplierContactDeletion"},"type":"array","title":"Deletions"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}}},"components":{"schemas":{"Body_login_ingest_api_token_post":{"properties":{"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"}},"type":"object","required":["username","password"],"title":"Body_login_ingest_api_token_post"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"Supplier":{"properties":{"CodSupplier":{"type":"string","maxLength":50,"title":"Codsupplier","description":"Código del proveedor"},"Supplier":{"type":"string","maxLength":255,"title":"Supplier","description":"Nombre del proveedor (máx 255)"},"NIF":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Nif","description":"NIF del proveedor (opcional, máx 50)"},"StartDate":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Startdate","description":"Fecha de inicio (opcional)"},"Status":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Status","description":"Estado del proveedor (opcional)"}},"additionalProperties":false,"type":"object","required":["CodSupplier","Supplier"],"title":"Supplier","description":"Modelo para proveedores","example":{"CodSupplier":"PRV000123","NIF":"A12345678","StartDate":"2023-05-10","Status":"ACTIVE","Supplier":"Proveedor Demo S.A."}},"SupplierContact":{"properties":{"CodSupplier":{"type":"string","maxLength":50,"title":"Codsupplier","description":"Código del proveedor"},"Name":{"type":"string","maxLength":255,"title":"Name","description":"Nombre"},"NIF":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Nif","description":"NIF (opcional, máx 50)"},"Adress":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Adress","description":"Dirección (opcional, máx 255)"},"City":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"City","description":"Ciudad (opcional, máx 255)"},"Country":{"anyOf":[{"type":"string","maxLength":2},{"type":"null"}],"title":"Country","description":"País ISO2 (opcional)"},"Postal_Code":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Postal Code","description":"Código postal (opcional, máx 50)"},"Phone":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Phone","description":"Teléfono (opcional, máx 50)"},"E_Mail":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"E Mail","description":"Email (opcional, máx 255)"},"Status":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Status","description":"Estado (opcional, máx 50)"}},"additionalProperties":false,"type":"object","required":["CodSupplier","Name"],"title":"SupplierContact","description":"Modelo para contactos de proveedores.","example":{"Adress":"Calle Mayor 15","City":"Barcelona","CodSupplier":"PRV000123","Country":"ES","E_Mail":"info@proveedordemo.com","NIF":"A12345678","Name":"Proveedor Demo S.A.","Phone":"+34931234567","Postal_Code":"08001","Status":"ACTIVE"}},"SupplierContactDeletion":{"properties":{"CodSupplier":{"type":"string","maxLength":50,"title":"Codsupplier","description":"Código del proveedor al que pertenece el contacto"},"NIF":{"type":"string","maxLength":50,"title":"Nif","description":"NIF del contacto a eliminar"},"DeletionDate":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Deletiondate","description":"Fecha y hora de borrado (opcional, por defecto fecha y hora actual)"}},"type":"object","required":["CodSupplier","NIF"],"title":"SupplierContactDeletion","description":"Modelo para eliminación de contactos de proveedores","example":{"CodSupplier":"PRV000123","DeletionDate":"2026-02-05T10:30:00Z","NIF":"A12345678"}},"SupplierDeletion":{"properties":{"CodSupplier":{"type":"string","maxLength":50,"title":"Codsupplier","description":"Código del proveedor a eliminar"},"DeletionDate":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Deletiondate","description":"Fecha y hora de borrado (opcional, por defecto fecha y hora actual)"}},"type":"object","required":["CodSupplier"],"title":"SupplierDeletion","description":"Modelo para eliminación de proveedores","example":{"CodSupplier":"PRV000123","DeletionDate":"2026-02-05T10:30:00Z"}},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}